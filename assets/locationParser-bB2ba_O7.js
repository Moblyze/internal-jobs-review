let m=null,A=null;function g(){return m!==null?Promise.resolve(m):A||(A=fetch("/internal-jobs-review/data/locations-geocoded.json").then(e=>e.ok?e.json():(console.info("Geocoded locations not yet generated, using fallback parser"),{})).then(e=>(m=e,Object.keys(e).length>0&&console.log(`Loaded ${Object.keys(e).length} geocoded locations`),e)).catch(e=>(console.warn("Could not load geocoded data, using fallback parser"),m={},{})),A)}function I(e){if(!m||Object.keys(m).length===0)return null;const n=e.replace(/^locations\s*/i,"").trim(),o=m[n];if(!o)return null;const{city:t,state:r,stateCode:p,country:f,countryCode:a}=o;return!t&&r&&a==="US"?r:!t&&r&&a==="CA"?`${r}, Canada`:a==="US"&&t&&p?`${t}, ${p}`:a==="CA"&&t&&p?`${t}, ${p}, Canada`:a==="BR"&&t&&r?t.toLowerCase()===r.toLowerCase()?`${t}, Brazil`:`${t}, ${r}, Brazil`:a==="GB"&&t?`${t}, United Kingdom`:a==="IN"&&t&&r?t.toLowerCase()===r.toLowerCase()?`${t}, India`:`${t}, ${r}, India`:t&&r&&f?t.toLowerCase()===r.toLowerCase()?`${t}, ${f}`:`${t}, ${r}, ${f}`:t&&f?`${t}, ${f}`:o.mapboxPlaceName?o.mapboxPlaceName:null}g();const L={FI:"Florence",MI:"Milan",RM:"Rome",NA:"Naples",TO:"Turin"},T={DF:"Mexico City",CDMX:"Mexico City"};function N(e){return e.toLowerCase().split(/[\s-]+/).map(n=>n.charAt(0).toUpperCase()+n.slice(1)).join(" ")}function U(e){return e=e.replace(/\s*\([^)]*\)/g,""),e=e.replace(/^OTHER\s+/i,""),e=e.replace(/\s*-\s*(VENTURA|RETIC|OTHER).*$/i,""),N(e.trim())}function h(e,n=!1){if(!e||(e=e.replace(/^locations\s*/i,"").replace(/^Location:\s*/i,"").trim(),!e))return null;const o=I(e);if(o){if(n){const a=m[e];return{formatted:o,metadata:{countryCode:a.countryCode,countryName:a.country,stateCode:a.stateCode,stateName:a.state,cityName:a.city,coordinates:a.coordinates,parsed:!0,source:"geocoded"}}}return o}const t=["Global Recruiting","Gulf of Mexico","Noble Interceptor"];for(const a of t)if(e.toLowerCase().includes(a.toLowerCase()))return n?{formatted:a,metadata:{special:!0,originalText:a}}:a;let r=e.match(/^([A-Z]{2})-([A-Z]{2,4})-([^-]+?)(?:-(.+))?$/i);if(r||(r=e.match(/^([A-Z]{2})-([^-]+?)(?:-(.+))?$/i),r&&(r=[r[0],r[1],null,r[2],r[3]])),r){const[,a,i,l]=r,s=U(l),c={US:"United States",CA:"Canada",GB:"United Kingdom",AU:"Australia",NZ:"New Zealand",AT:"Austria",BE:"Belgium",BG:"Bulgaria",HR:"Croatia",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",EE:"Estonia",FI:"Finland",FR:"France",DE:"Germany",GR:"Greece",HU:"Hungary",IE:"Ireland",IT:"Italy",LV:"Latvia",LT:"Lithuania",LU:"Luxembourg",MT:"Malta",NL:"Netherlands",NO:"Norway",PL:"Poland",PT:"Portugal",RO:"Romania",SK:"Slovakia",SI:"Slovenia",ES:"Spain",SE:"Sweden",CH:"Switzerland",AR:"Argentina",BR:"Brazil",CL:"Chile",CO:"Colombia",MX:"Mexico",PE:"Peru",VE:"Venezuela",CN:"China",IN:"India",ID:"Indonesia",JP:"Japan",MY:"Malaysia",PH:"Philippines",SG:"Singapore",KR:"South Korea",TH:"Thailand",VN:"Vietnam",AE:"United Arab Emirates",BH:"Bahrain",IL:"Israel",JO:"Jordan",KW:"Kuwait",OM:"Oman",QA:"Qatar",SA:"Saudi Arabia",TR:"Turkey",EG:"Egypt",KE:"Kenya",MA:"Morocco",NG:"Nigeria",ZA:"South Africa"}[a==null?void 0:a.toUpperCase()]||null,d={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"},u=i&&d[i.toUpperCase()]&&s.toLowerCase()===d[i.toUpperCase()].toLowerCase(),y=n?{countryCode:a?a.toUpperCase():null,countryName:c,stateCode:i?i.toUpperCase():null,stateName:i&&d[i.toUpperCase()]?d[i.toUpperCase()]:null,cityName:u?null:s,coordinates:null,parsed:!0,source:"fallback"}:null;let C;return u&&a&&a.toUpperCase()==="US"?C=s:a&&a.toUpperCase()==="US"&&i?C=`${s}, ${i.toUpperCase()}`:a&&a.toUpperCase()==="CA"&&i?C=`${s}, ${i.toUpperCase()}, Canada`:a&&a.toUpperCase()==="BR"&&i?C=`${s}, Brazil`:a&&i&&a.toUpperCase()==="MX"&&T[i.toUpperCase()]?C=`${s}, Mexico`:a&&i&&a.toUpperCase()==="IT"&&L[i.toUpperCase()]?C=`${s}, Italy`:c?C=`${s}, ${c}`:C=s,n?{formatted:C,metadata:y}:C}const p=e.match(/^([^,]+),\s*([A-Za-z\s]+)$/);if(p){const[,a,i]=p,l=N(a.trim()),s=N(i.trim()),c={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"}[s];if(c){const u=`${l}, ${c}`;return n?{formatted:u,metadata:{countryCode:"US",countryName:"United States",stateCode:c,stateName:s,cityName:l,coordinates:null,parsed:!0,source:"fallback"}}:u}const d=`${l}, ${s}`;return n?{formatted:d,metadata:{cityName:l,parsed:!1,originalText:e,source:"fallback"}}:d}const f=e.match(/^([^,]+),\s*([A-Z]{2})$/);if(f){const[,a,i]=f,l=N(a.trim()),s=new Set(["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"]),M={AE:"United Arab Emirates",AU:"Australia",BR:"Brazil",CA:"Canada",CN:"China",DE:"Germany",FR:"France",GB:"United Kingdom",IN:"India",IT:"Italy",JP:"Japan",MX:"Mexico",MY:"Malaysia",NL:"Netherlands",NO:"Norway",PT:"Portugal",SG:"Singapore",TR:"Turkey",US:"United States"};if(s.has(i.toUpperCase())){const u=`${l}, ${i.toUpperCase()}`;return n?{formatted:u,metadata:{countryCode:"US",countryName:"United States",stateCode:i.toUpperCase(),stateName:null,cityName:l,coordinates:null,parsed:!0,source:"fallback"}}:u}const c=M[i.toUpperCase()];if(c){const u=`${l}, ${c}`;return n?{formatted:u,metadata:{countryCode:i.toUpperCase(),countryName:c,stateCode:null,stateName:null,cityName:l,coordinates:null,parsed:!0,source:"fallback"}}:u}const d=`${l}, ${i}`;return n?{formatted:d,metadata:{cityName:l,parsed:!1,originalText:e,source:"fallback"}}:d}if(/^[A-Za-z\s]+$/.test(e)&&!e.includes(`
`)){const a=N(e);return n?{formatted:a,metadata:{cityName:a,parsed:!1,originalText:e,source:"fallback"}}:a}return n?{formatted:e,metadata:{parsed:!1,originalText:e,source:"fallback"}}:e}function $(e){if(!e)return null;const n=e.split(`
`).filter(t=>{const r=t.trim();return r&&r.toLowerCase()!=="locations"});if(n.length===0)return null;const o=n.map(t=>h(t)).filter(Boolean);return o.length===0?null:o.length>1?`${o[0]} +${o.length-1} more`:o[0]}function w(e){return e?e.split(`
`).filter(o=>{const t=o.trim();return t&&t.toLowerCase()!=="locations"}).map(o=>h(o,!1)).filter(Boolean):[]}function O(e){if(!e)return null;const n=e.split(`
`).filter(t=>{const r=t.trim();return r&&r.toLowerCase()!=="locations"});if(n.length===0)return null;const o=h(n[0],!0);return o&&n.length>1&&(o.metadata.additionalLocations=n.length-1),o}function R(e){return e?e.split(`
`).filter(o=>{const t=o.trim();return t&&t.toLowerCase()!=="locations"}).map(o=>h(o,!0)).filter(Boolean):[]}export{$ as formatLocation,w as getAllLocations,R as getAllLocationsWithMetadata,O as getLocationWithMetadata};
