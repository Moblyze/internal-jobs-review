function r(o){const n=new Set;return o.forEach(t=>{t.location&&t.location.split(`
`).forEach(a=>{const c=a.replace(/^locations\s*/i,"").trim();c&&c.toLowerCase()!=="locations"&&n.add(c)})}),Array.from(n)}async function s(){try{const o=await fetch("/internal-jobs-review/data/locations-geocoded.json");return o.ok?await o.json():{}}catch(o){return console.warn("Could not load existing geocoded data:",o.message),{}}}async function i(o,n=null){return console.error("VITE_MAPBOX_TOKEN not found in environment"),{newLocations:0,failed:0,totalGeocodedCount:0,error:"Missing Mapbox token"}}async function l(o){try{const n=r(o),t=await s(),e=n.filter(a=>!t[a]);return{hasNewLocations:e.length>0,newLocationCount:e.length,totalLocations:n.length,existingGeocodedCount:Object.keys(t).length}}catch(n){return console.error("Error checking for new locations:",n),{hasNewLocations:!1,newLocationCount:0,totalLocations:0,existingGeocodedCount:0,error:n.message}}}export{l as checkForNewLocations,i as geocodeNewLocations};
