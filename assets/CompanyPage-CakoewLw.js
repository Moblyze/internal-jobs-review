import{j as e}from"./index-DjMKCwpZ.js";import{u as B,m as R}from"./htmlCleaner-vUnNs8oj.js";import{u as $,S as E}from"./SEO-ClIjtH0F.js";import{s as S,J as M}from"./JobCard-MTDaJ2W4.js";import{getAllLocations as L}from"./locationParser-bB2ba_O7.js";import{extractJobCertifications as O}from"./certificationExtractor-Dsducp3z.js";import{B as T}from"./Breadcrumbs-BrHKZYLn.js";import{h as z,r as A}from"./vendor-D-Jip_Ib.js";import"./skillValidator-BcnBOhtX.js";function Q(){var g,h,p,b,f,u,j,N;const{companySlug:m}=z(),{jobs:C,loading:J,error:x}=B(),{filters:t}=$();if(J)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading company jobs..."})]})});if(x)return e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-red-900 mb-2",children:"Error Loading Company"}),e.jsx("p",{className:"text-red-700",children:x})]});const r=R(C,m),a=r.length>0?r[0].company:S(m),c=A.useMemo(()=>{var d,y,v,w;let s=r;return((d=t.locations)==null?void 0:d.length)>0&&(s=s.filter(o=>{const i=L(o.location);return t.locations.some(l=>i.includes(l))})),((y=t.skills)==null?void 0:y.length)>0&&(s=s.filter(o=>t.skills.some(i=>{var l;return(l=o.skills)==null?void 0:l.includes(i)}))),((v=t.certifications)==null?void 0:v.length)>0&&(s=s.filter(o=>{const i=O(o);return t.certifications.some(l=>i.includes(l))})),((w=t.roles)==null?void 0:w.length)>0&&(s=s.filter(o=>t.roles.some(i=>{var l;return(l=o.energy_role)==null?void 0:l.includes(i)}))),s},[r,t]),P=r.map(s=>L(s.location)).filter(s=>s.length>0),n=[...new Set(P.flat())].sort(),k=[{label:a}];return e.jsxs("div",{children:[e.jsx(E,{title:`${a} - ${r.length} Open Positions`,description:`Browse ${c.length} jobs at ${a}. Locations: ${n.slice(0,5).join(", ")}`}),e.jsx(T,{items:k}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:a}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:r.length}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Total Positions"})]}),(((g=t.locations)==null?void 0:g.length)>0||((h=t.skills)==null?void 0:h.length)>0||((p=t.certifications)==null?void 0:p.length)>0||((b=t.roles)==null?void 0:b.length)>0)&&e.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:c.length}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Filtered Results"})]}),n.length>0&&e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:n.length}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Locations"})]})]}),n.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Locations:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map((s,d)=>e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-700",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),s]},d))})]})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Open Positions",(((f=t.locations)==null?void 0:f.length)>0||((u=t.skills)==null?void 0:u.length)>0||((j=t.certifications)==null?void 0:j.length)>0||((N=t.roles)==null?void 0:N.length)>0)&&e.jsx("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(filtered by URL parameters)"})]}),r.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:e.jsxs("p",{className:"text-gray-600",children:["No jobs found for ",a,"."]})}):c.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:e.jsx("p",{className:"text-gray-600",children:"No jobs match your filters. Try adjusting your criteria."})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c.map(s=>e.jsx(M,{job:s},s.id))})]})]})}export{Q as default};
