import{j as n}from"./index-DjMKCwpZ.js";import{i as p,L as i}from"./vendor-D-Jip_Ib.js";import{filterValidSkills as u}from"./skillValidator-BcnBOhtX.js";import{formatLocation as d}from"./locationParser-bB2ba_O7.js";import{l as g}from"./htmlCleaner-vUnNs8oj.js";function S(e){if(!e)return null;try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return null}}function x(e){if(!e)return null;try{const r=new Date(e),s=new Date-r,t=Math.floor(s/(1e3*60*60*24));return t===0?"Today":t===1?"1 day ago":t<7?`${t} days ago`:t<30?`${Math.floor(t/7)} weeks ago`:t<365?`${Math.floor(t/30)} months ago`:`${Math.floor(t/365)} years ago`}catch{return null}}function f(e){return e.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"")}function T(e){return e.split("-").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function c(e,r){if(!e||!r)return console.warn("[jobToSlug] Missing company or title:",{company:e,title:r}),"";const l=e.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,""),s=r.trim().toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"").substring(0,100);return`${l}-${s}`}function $(e,r){if(!e||e.length===0)return console.warn("[findJobBySlug] No jobs to search"),null;if(!r)return console.warn("[findJobBySlug] No slug provided"),null;const l=e.filter(s=>{const t=c(s.company,s.title),a=t===r;return(e.indexOf(s)<3||a)&&console.log("[findJobBySlug]",a?"✓ MATCH":"✗",`Expected: "${t}" vs URL: "${r}"`,a?s.title:""),a});return l.length===0?console.warn("[findJobBySlug] No job found for slug:",r):console.log("[findJobBySlug] ✓ Found job:",l[0].title),l.length>0?l[0]:null}function b({job:e}){const r=c(e.company,e.title),[l]=p(),s=l.toString();return n.jsxs(i,{to:`/jobs/${r}${s?`?${s}`:""}`,className:"block bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md hover:border-blue-300 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 flex-1",children:e.title}),e.status==="removed"&&n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800 whitespace-nowrap",children:"Removed"}),e.status==="paused"&&n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-yellow-100 text-yellow-800 whitespace-nowrap",children:"Paused"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 mb-3",children:[n.jsx(i,{to:`/companies/${f(e.company)}${s?`?${s}`:""}`,onClick:t=>t.stopPropagation(),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:e.company}),(()=>{const t=d(e.location);return t?n.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[n.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),t]}):null})(),e.employmentType&&n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium whitespace-nowrap ${e.employmentType==="Contractor"?"bg-orange-100 text-orange-800":e.employmentType==="Full-Time"?"bg-green-100 text-green-800":e.employmentType==="Part-Time"?"bg-purple-100 text-purple-800":e.employmentType==="Temporary"?"bg-yellow-100 text-yellow-800":e.employmentType==="Internship"?"bg-teal-100 text-teal-800":"bg-gray-100 text-gray-800"}`,children:e.employmentType})]}),e.description&&(()=>{const a=(typeof e.description=="string"?g(e.description):"").replace(/\s+/g," ").trim(),o=a.substring(0,150),m=a.length>150;return n.jsxs("p",{className:"text-gray-700 text-sm mb-3 line-clamp-2",children:[o,m?"...":""]})})(),(()=>{const t=u(e.skills);return t.length===0?null:n.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[t.slice(0,3).map((a,o)=>n.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:a},o)),t.length>3&&n.jsxs("span",{className:"text-xs text-gray-500",children:["+",t.length-3," more"]})]})})(),n.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.salary&&n.jsx("span",{className:"text-green-600 font-medium",children:e.salary}),e.postedDate&&n.jsx("span",{children:x(e.postedDate)})]})]})}export{b as J,S as a,f as c,$ as f,T as s};
